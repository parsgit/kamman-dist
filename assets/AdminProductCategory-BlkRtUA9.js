import{a as $,_ as A}from"./MyInput-kzpYOPTi.js";import{C as M,_ as S}from"./InlineList-C3fFoNHq.js";import{_ as q}from"./TreeList-DWq0j0sc.js";import{l as D,n as O,r as l,d as f,m as j,M as F,o as w,f as B,w as m,P as N,g as r,a as s,z as G,t as P,q as H}from"./index-Bk4oFuCi.js";import{_ as J}from"./MyModal-BgBsQfpV.js";import{_ as K}from"./ToastMessage-y9Ls-jm6.js";const L={class:"flex flex-col gap-4"},Q={class:"flex gap-2 items-end"},T={class:"text-center mt-8 flex gap-4"},U={class:"mt-8"},at={__name:"AdminProductCategory",setup(W){const _=D(),R=O(),b=l(""),u=l(0),o=l(""),n=l(""),p=l(0),i=l(!0),v=l(null),y=l(null),g=f([]),c=f({}),x=f([]),V=()=>{v.value.close(),N("admin/category/save",{id:u.value,title:o.value,url:n.value,parent_id:p.value},a=>{a.ok&&(y.value.show("ذخیره شد","success"),d())})},d=()=>{var a;p.value=u.value||0,N("admin/categorys",{search:b.value,id:((a=R.params)==null?void 0:a.id)||0,order:"asc"},t=>{t.ok&&(g.value=t.list,c.value=t.category,x.value=t.tree,c.value&&(p.value=c.value.id))})},k=a=>{_.push({name:"admin_product_category_sub",params:{id:a}})};_.afterEach(()=>{d()});const z=a=>{b.value=a,d()},E=a=>{u.value=a.id,o.value=a.title,n.value=a.url,p.value=a.parent_id,v.value.show()},I=()=>{u.value=0,o.value="",n.value="",v.value.close()};return j(()=>{d()}),F(o,()=>{i.value&&(n.value=o.value.replaceAll(" ","-"),n.value=n.value.replaceAll("_","-"))}),(a,t)=>(w(),B(M,null,{default:m(()=>{var C;return[r(K,{ref_key:"toast",ref:y},null,512),r(J,{class:"bg-backdrop",title:"ایجاد دسته بندی",ref_key:"new_category",ref:v},{default:m(()=>[s("div",L,[r($,{onInput:t[0]||(t[0]=e=>o.value=e),value:o.value,"title-class":"text-primary text-lg","input-class":"input-primary",title:"عنوان"},null,8,["value"]),s("div",Q,[r($,{class:"flex-1",onInput:t[1]||(t[1]=e=>a.label=e),value:n.value,"title-class":"text-primary text-lg","input-class":"input-primary","r-title":"",title:"لینک"},null,8,["value"]),s("button",{onClick:t[2]||(t[2]=e=>i.value=!i.value),class:G(["btn",{"btn-secondary btn-outline":!i.value,"btn-primary":i.value}])}," Auto ",2)]),s("div",T,[s("button",{onClick:t[3]||(t[3]=e=>V()),class:"btn btn-primary flex-1"},P(u.value==0?"ذخیره":"ویرایش"),1),s("button",{onClick:I,class:"btn btn-secondary px-8"},"لغو")])])]),_:1},512),(C=c.value)!=null&&C.id?(w(),B(A,{key:0,title:"اطلاعات منو"},{default:m(()=>{var e;return[s("div",U,"عنوان : "+P((e=c.value)==null?void 0:e.title),1)]}),_:1})):H("",!0),r(A,{title:"لیست انواع محصول",class:"mt-12"},{default:m(()=>[r(q,{class:"mt-4",onClick:t[4]||(t[4]=e=>k(e.id)),"tree-list":x.value},null,8,["tree-list"]),r(S,{title:" ",list:g.value,onEditAction:t[6]||(t[6]=e=>E(e)),onSearch:t[7]||(t[7]=e=>z(e)),onReload:t[8]||(t[8]=e=>d()),"remove-modal":"true","remove-action":"admin/category/remove","edit-btn":"true","trash-btn":"true",class:"bg-base-300","title-class":"text-primary font-bold","item-title-class":"text-base-content text-lg font-bold","open-btn":"true",onOpenAction:t[9]||(t[9]=e=>k(e.id))},{default:m(()=>[s("button",{onClick:t[5]||(t[5]=e=>v.value.show()),class:"btn btn-primary"},"ایجاد دسته بندی")]),_:1},8,["list"])]),_:1})]}),_:1}))}};export{at as default};
